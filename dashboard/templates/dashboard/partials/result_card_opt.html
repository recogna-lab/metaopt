<div class="custom-card">
    <h1>Otimização</h1>

    <div>
        <h3>Solução</h3>
        
        <table class="table table-sm striped table-nowrap">
            <thead>
                <tr>
                    <th class="th-sm"></th>
                    <th class="th-sm"></th>     
                </tr>
            </thead>
            <tbody>
                <tr class="col-sm">
                    <th scope="row" class="sm">Melhor solução</th>
                    
                    {% load dashboard_extras %}
                    <td>{{ task.result.best_solution|listformat:3 }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div>
        <h3>Função</h3>
        
        <table class="table table-sm striped table-nowrap">
            <thead>
                <tr>
                    <th class="th-sm"></th>
                    <th class="th-sm"></th>     
                </tr>
            </thead>
            <tbody>
                <tr class="col-sm">
                    <th scope="row" class="sm">Melhor valor</th>

                    {% with t=task.result.best_value|stringformat:'.3e' %}
                    <td>{{ t|replace:'.|,' }}</td>
                    {% endwith %}
                </tr>
                
                {% if task.task_kwargs.executions > 1 %}
                    <tr class="col-sm">
                        <th scope="row" class="sm">Pior valor</th>

                        {% with t=task.result.max_value|stringformat:'.3e' %}
                        <td>{{ t|replace:'.|,' }}</td>
                        {% endwith %}
                    </tr>
                    <tr class="col-sm">
                        <th scope="row" class="sm">Valor médio</th>

                        {% with t=task.result.avg_value|stringformat:'.3e' %}
                        <td>{{ t|replace:'.|,' }}</td>
                        {% endwith %}
                    </tr>
                    <tr class="col-sm">
                        <th scope="row" class="sm">Desvio padrão</th>
                        {% with t=task.result.stdev_value|stringformat:'.3e' %}
                        <td>{{ t|replace:'.|,' }}</td>
                        {% endwith %}
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>

    {% with optimal=task.task_kwargs.function.optimal %}
        {% if optimal %}
            <div>
                <h3>Ótimo Global</h3>
                
                <table class="table table-sm striped table-nowrap">
                    <thead>
                        <tr>
                            <th class="th-sm"></th>
                            <th class="th-sm"></th>     
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="col-sm">
                            <th scope="row" class="sm">Solução ótima</th>
                            <td>{{ optimal.solution|listformat:3 }}</td>
                        </tr>
                        <tr class="col-sm">
                            <th scope="row" class="sm">
                                Valor ótimo da função
                            </th>

                            {% with t=optimal.value|stringformat:'.3e' %}
                            <td>{{ t|replace:'.|,' }}</td>
                            {% endwith %}
                        </tr>
                    </tbody>
                </table>
            </div>
        {% endif %}
    {% endwith %}
</div>