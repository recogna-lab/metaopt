{% extends 'global/pages/base.html' %}

{% block title %}{{ title }} |{% endblock title %}

{% block content %}
    
    <div class="font-robo custom-container">
        <div class="dash-content">
            <div class="cards">
                <div class="l-custom-card">
                    {% include 'dashboard/partials/task_details_card.html' %}
                </div>
                <div class="l-custom-card">
                    <h1>Resultados</h1>
                    
                    <h2>Otimização</h2>
                    <table class="table table-striped table-nowrap">
                        <thead>
                            <tr>
                                <th class="th-sm"></th>
                                <th class="th-sm"></th>     
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="col-sm">
                                <th scope="row" class="sm">Melhor solução</th>
                                <td>{{ task.result.best_solution }}</td>
                            </tr>
                            <tr class="col-sm">
                                <th scope="row" class="sm">Melhor valor da função</th>
                                <td>{{ task.result.best_value|floatformat:3 }}</td>
                            </tr>
                        </tbody>
                    </table>

                    {% if task.task_name == 'Seleção de Características' %}
                    <br>
                    <br>
                    <h2>Seleção de Características</h2>
                    <table class="table table-striped table-nowrap">
                        <thead>
                            <tr>
                                <th class="th-sm"></th>
                                <th class="th-sm"></th>     
                            </tr>
                        </thead>
                        <tbody>
                            <h2></h2>
                            <tr class="col-sm">
                                <th scope="row" class="sm">Acurácia</th>
                                <td>{{ task.result.accuracy|floatformat:3 }}</td>
                            </tr>
                            <tr class="col-sm">
                                <th scope="row" class="sm">Vetor de Características</th>
                                <td>{{ task.result.best_selected_features }}</td>
                            </tr>
                            <tr class="col-sm">
                                <th scope="row" class="sm">Precision</th>
                                
                                <td> 
                                    {% for p in task.result.precision %}
                                    <b>Classe {{forloop.counter}}:</b>  {{ p|floatformat:3 }} <br>
                                    {% endfor %}
                                </td>
                            </tr>

                            <tr class="col-sm">
                                <th scope="row" class="sm">Recall</th>
                                <td>
                                    {% for rec in task.result.recall %}
                                        <b>Classe {{forloop.counter}}:</b>  {{rec|floatformat:3}}  <br>
                                    {% endfor %}
                                </td>
                            </tr>
                            <tr class="col-sm">
                                <th scope="row" class="sm">F1-Score</th>
                                <td>
                                {% for f in task.result.f1_score %}
                                    <b>Classe {{forloop.counter}}:</b>  {{ f|floatformat:3 }} <br>
                                {% endfor %}
                                
                                </td>
                            </tr>    
                        </tbody>
                    </table>
                    {% endif %}
                </div>
            </div>
                
            <div class="custom-card">
                <h1>Gráficos</h1>
                
                {% if conv_plot_div %}
                    {{ conv_plot_div|safe }}
                {% endif %}
            </div>
        </div>
    </div>

{% endblock content %}